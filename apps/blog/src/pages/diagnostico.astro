---
import BaseLayout from "../layouts/BaseLayout.astro";
import MagCard from "../components/editorial/MagCard.astro";

const title = "Diagnóstico | VivaTDAH";
const description =
  "Diagnóstico de TDAH com clareza: sinais, história de vida, comorbidades, como se preparar e o que perguntar em consulta.";

const canonical = Astro.site ? new URL(`/diagnostico`, Astro.site).toString() : `/diagnostico`;
const ogImage = "/hero/Diagnostico.jpg";

/* ====== Conteúdo (o que você já tinha) ====== */
const clusters = [
  { title: "Sinais em adultos", description: "Como aparece além da infância e além do estereótipo.", href: "/post/diagnostico-adulto" },
  { title: "Mulheres e diagnóstico tardio", description: "Máscara social, ansiedade e exaustão como “camuflagem”.", href: "/post/diagnostico-tardio-mulheres" },
  { title: "Comorbidades", description: "Ansiedade, depressão, TEA, trauma, bipolaridade: o que muda.", href: "/post/comorbidades" },
  { title: "Avaliação e testes", description: "O que ajuda, o que não decide sozinho e como ler resultados.", href: "/post/avaliacao-testes" },
  { title: "Checklist para consulta", description: "Como chegar com histórico e perguntas certas.", href: "/post/checklist-consulta" },
  { title: "Tratamento após diagnóstico", description: "O que normalmente vem depois: plano, acompanhamento e ajustes.", href: "/post/pos-diagnostico" },
];

const curated = [
  { title: "Diagnóstico de TDAH na vida adulta", excerpt: "Sinais, história e próximos passos com menos ruído.", href: "/post/diagnostico-adulto" },
  { title: "Diagnóstico tardio em mulheres", excerpt: "Por que tantas mulheres chegam exaustas e duvidando de si.", href: "/post/diagnostico-tardio-mulheres" },
  { title: "Comorbidades: quando não é só TDAH", excerpt: "Como evitar confusão e montar um plano mais preciso.", href: "/post/comorbidades" },
];

const faq = [
  { q: "Quem pode diagnosticar TDAH?", a: "Em geral, médicos (psiquiatra/neurologista) e psicólogos com avaliação adequada podem contribuir. O importante é processo clínico completo, não um teste isolado." },
  { q: "Teste neuropsicológico é obrigatório?", a: "Não é obrigatório em todos os casos. Ajuda quando há dúvidas, comorbidades, ou necessidade de documentação, mas não substitui entrevista clínica e histórico." },
  { q: "E se eu estiver usando ansiedade como “combustível”?", a: "Isso é comum. Muitas pessoas funcionam por urgência e medo. O diagnóstico e o plano precisam considerar regulação e suporte, não só produtividade." },
];

/* ====== Layout estilo “revista” ====== */
const hero = {
  kicker: "SEÇÃO",
  title: "Diagnóstico",
  subtitle:
    "Aqui você encontra um caminho claro para entender sinais, montar histórico e reduzir ruído. Diagnóstico bom é processo, não rótulo.",
  image: "/hero/Diagnostico.jpg",
  alt: "Diagnóstico de TDAH",
};

const quickRoutes = [
  { title: "Suspeita de TDAH", desc: "Sinais em adultos e mulheres, sem rótulos fáceis.", href: "#suspeita" },
  { title: "Como buscar avaliação", desc: "O que levar, o que perguntar e como evitar consulta rasa.", href: "#avaliacao" },
  { title: "Depois do diagnóstico", desc: "Transforme o laudo em plano e sustentação real.", href: "#pos" },
];

const steps = [
  { title: "1) Organize sinais e história", text: "Liste padrões desde cedo e impactos atuais: sono, trabalho, relações, finanças e rotina." },
  { title: "2) Leve exemplos do cotidiano", text: "Casos concretos valem mais do que “eu acho”: atrasos, esquecimentos, impulsos, travamentos." },
  { title: "3) Cheque comorbidades e diferencial", text: "Ansiedade, depressão, TEA, trauma e sono mudam o diagnóstico e o plano." },
  { title: "4) Saia com próximos passos", text: "Plano útil = psicoeducação + ajustes de ambiente + acompanhamento + tratamento quando indicado." },
];

/* ====== Artigos em destaque (com imagens diferentes) ====== */
const featuredCardImages = [
  "/hero/Diagnostico.jpg",
  "/hero/TDAH_sintomas.png",
  "/hero/tdah.jpg",
  "/hero/comece-aqui.jpg",
];

const featuredHero = {
  href: curated?.[0]?.href ?? "/post/diagnostico-adulto",
  kicker: "CARACTERÍSTICA",
  title: curated?.[0]?.title ?? "Diagnóstico de TDAH na vida adulta",
  excerpt: curated?.[0]?.excerpt ?? "Sinais, história e próximos passos com menos ruído.",
  image: featuredCardImages[0],
  imageAlt: "Imagem de capa",
};

const featuredCards = [
  {
    href: curated?.[1]?.href ?? "/post/diagnostico-tardio-mulheres",
    kicker: "PERGUNTAS E RESPOSTAS",
    title: curated?.[1]?.title ?? "Diagnóstico tardio em mulheres",
    excerpt: curated?.[1]?.excerpt ?? "Por que tantas mulheres chegam exaustas e duvidando de si.",
    image: featuredCardImages[2],
    imageAlt: "Imagem sobre TDAH em mulheres",
    variant: "green",
  },
  {
    href: curated?.[2]?.href ?? "/post/comorbidades",
    kicker: "DIFERENCIAL",
    title: curated?.[2]?.title ?? "Comorbidades: quando não é só TDAH",
    excerpt: curated?.[2]?.excerpt ?? "Como evitar confusão e montar um plano mais preciso.",
    image: featuredCardImages[1],
    imageAlt: "Imagem sobre sintomas e comorbidades",
    variant: "green",
  },
  {
    href: "/post/checklist-consulta",
    kicker: "CHECKLIST",
    title: "Checklist para consulta",
    excerpt: "Histórico, exemplos e perguntas que mudam o nível do atendimento.",
    image: featuredCardImages[3],
    imageAlt: "Imagem checklist",
    variant: "green",
  },
];

const cta = {
  title: "Quer se preparar para a consulta?",
  text: "Leve um mini-histórico, exemplos concretos e perguntas objetivas. Isso muda o jogo.",
  primaryHref: "/post/checklist-consulta",
  primaryLabel: "Ver checklist de consulta",
  secondaryHref: "/post/avaliacao-testes",
  secondaryLabel: "Ver avaliação e testes",
};
---

<BaseLayout
  title={title}
  description={description}
  canonical={canonical}
  ogImage={ogImage}
  ogType="website"
>
  <style>
    /* ====== Layout base ====== */
    .diagWrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: clamp(18px, 4vw, 56px) 16px;
      display: grid;
      gap: clamp(18px, 3vw, 34px);
    }

    .sectionTitle {
      font-family: "Playfair Display", serif;
      font-size: clamp(1.55rem, 2.3vw, 2.25rem);
      line-height: 1.12;
      letter-spacing: -0.02em;
      margin: 0 0 14px 0;
      position: relative;
    }
    .sectionTitle::after {
      content: "";
      display: block;
      width: 72px;
      height: 2px;
      margin-top: 12px;
      background: rgba(170, 140, 255, 0.65);
    }

    .card {
      background: rgba(45, 27, 78, 0.42);
      border: 1px solid rgba(170, 140, 255, 0.22);
      border-radius: 18px;
      padding: clamp(16px, 3vw, 34px);
      box-shadow: 0 14px 34px rgba(0, 0, 0, 0.18);
    }

    .muted {
      color: rgba(246, 243, 255, 0.78);
    }

    .anchor {
      scroll-margin-top: 90px;
    }

    /* ====== HERO ====== */
    .hero {
      border-radius: 22px;
      overflow: hidden;
      border: 1px solid rgba(170, 140, 255, 0.22);
      background: rgba(45, 27, 78, 0.92);
      box-shadow: 0 18px 44px rgba(0, 0, 0, 0.22);
      display: grid;
      grid-template-columns: 1fr;
    }

    @media (min-width: 980px) {
      .hero {
        grid-template-columns: 1.08fr 0.92fr;
        min-height: 380px;
      }
    }

    .heroText {
      padding: clamp(18px, 3vw, 34px);
      display: grid;
      gap: 12px;
      align-content: start;
    }

    .kicker {
      font-weight: 750;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 0.78rem;
      opacity: 0.92;
      color: rgba(246, 243, 255, 0.92);
    }

    .heroTitle {
      font-family: "Playfair Display", serif;
      font-size: clamp(2rem, 3.4vw, 3.1rem);
      line-height: 1.04;
      margin: 0;
      color: #fff;
    }

    .heroSubtitle {
      margin: 0;
      line-height: 1.65;
      color: rgba(246, 243, 255, 0.84);
      max-width: 62ch;
    }

    .heroMedia {
      position: relative;
      min-height: 240px;
      background: rgba(0, 0, 0, 0.12);
    }

    .heroMedia img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      object-position: center;
    }

    .heroActions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .heroActions a {
      text-decoration: none;
    }

    /* ====== Quick routes ====== */
    .grid3 {
      display: grid;
      gap: 16px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 780px) {
      .grid3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .routeCard {
      background: rgba(45, 27, 78, 0.92);
      border: 1px solid rgba(170, 140, 255, 0.22);
      border-radius: 18px;
      padding: 18px;
      display: grid;
      gap: 10px;
      height: 100%;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
      text-decoration: none;
      color: inherit;
    }

    .routeTitle {
      font-family: "Playfair Display", serif;
      font-size: 1.25rem;
      margin: 0;
      color: #fff;
      line-height: 1.12;
    }

    /* ====== Clusters grid ====== */
    .clustersGrid {
      display: grid;
      gap: 16px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 720px) {
      .clustersGrid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (min-width: 1024px) {
      .clustersGrid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .clusterCard {
      background: rgba(45, 27, 78, 0.92);
      border: 1px solid rgba(170, 140, 255, 0.22);
      border-radius: 18px;
      padding: 16px;
      text-decoration: none;
      color: inherit;
      display: grid;
      gap: 8px;
      height: 100%;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .clusterCard:hover {
      transform: translateY(-3px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.22);
    }
    @media (prefers-reduced-motion: reduce) {
      .clusterCard,
      .clusterCard:hover {
        transition: none;
        transform: none;
      }
    }

    .clusterTitle {
      margin: 0;
      font-weight: 780;
      color: #fff;
      line-height: 1.2;
    }

    /* ====== Steps ====== */
    .steps {
      display: grid;
      gap: 12px;
    }

    .stepRow {
      display: grid;
      gap: 6px;
      padding: 14px 0;
      border-bottom: 1px solid rgba(170, 140, 255, 0.18);
    }
    .stepRow:last-child {
      border-bottom: none;
    }

    .stepTitle {
      margin: 0;
      font-weight: 760;
      color: #fff;
    }

    .stepText {
      margin: 0;
      color: rgba(246, 243, 255, 0.78);
      line-height: 1.6;
      max-width: 72ch;
    }

    /* ====== Featured (1 grande + 3 MagCards) ====== */
    .featuredWrap {
      display: grid;
      gap: 18px;
    }

    .featuredBig {
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(170, 140, 255, 0.22);
      background: rgba(45, 27, 78, 0.92);
      box-shadow: 0 14px 34px rgba(0, 0, 0, 0.22);
    }

    .featuredBig a {
      display: grid;
      grid-template-columns: 1fr;
      color: inherit;
      text-decoration: none;
    }

    @media (min-width: 980px) {
      .featuredBig a {
        grid-template-columns: 1.1fr 0.9fr;
        min-height: 360px;
      }
    }

    .featuredBigText {
      padding: clamp(18px, 3vw, 34px);
      display: grid;
      gap: 12px;
      align-content: start;
    }

    .featuredBigTitle {
      font-family: "Playfair Display", serif;
      font-size: clamp(1.6rem, 2.4vw, 2.2rem);
      line-height: 1.08;
      margin: 0;
      color: #fff;
    }

    .featuredBigExcerpt {
      margin: 0;
      line-height: 1.6;
      color: rgba(246, 243, 255, 0.84);
      max-width: 62ch;
    }

    .featuredBigMedia {
      position: relative;
      min-height: 240px;
    }
    .featuredBigMedia img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      object-position: center;
    }

    .magGrid3 {
      display: grid;
      gap: 18px;
      grid-template-columns: 1fr;
      align-items: stretch;
    }
    @media (min-width: 780px) {
      .magGrid3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    /* sem underline nos cards */
    .featuredWrap :global(a) {
      text-decoration: none;
      color: inherit;
    }

    /* garante altura boa da imagem no MagCard */
    .featuredWrap :global(.magCard img) {
      width: 100%;
      height: 210px;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    /* pinta o variant green do MagCard pra roxo */
    .featuredWrap :global(.magCard--green) {
      background: rgba(45, 27, 78, 0.92) !important;
      border: 1px solid rgba(170, 140, 255, 0.22) !important;
      color: #f6f3ff !important;
      border-radius: 18px;
      overflow: hidden;
      height: 100%;
    }
    .featuredWrap :global(.magCard--green .ds-muted) {
      color: rgba(246, 243, 255, 0.78) !important;
    }

    /* ====== CTA ====== */
    .cta {
      background: rgba(45, 27, 78, 0.35);
      border: 1px solid rgba(170, 140, 255, 0.22);
      display: grid;
      gap: 14px;
      align-items: center;
      text-align: left;
    }
    .ctaActions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 6px;
    }
    .ctaActions a {
      text-decoration: none;
    }
    @media (min-width: 900px) {
      .cta {
        grid-template-columns: 1.3fr 0.7fr;
      }
      .ctaActions {
        justify-content: flex-end;
      }
    }

    /* ====== FAQ ====== */
    .faqItem {
      border-bottom: 1px solid rgba(170, 140, 255, 0.18);
      padding: 14px 0;
    }
    .faqItem summary {
      cursor: pointer;
      font-weight: 700;
      list-style: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .faqItem summary::-webkit-details-marker {
      display: none;
    }
  </style>

  <!-- HERO -->
  <section class="diagWrap" style="padding-top: 22px;">
    <header class="hero">
      <div class="heroText">
        <div class="kicker">{hero.kicker}</div>
        <h1 class="heroTitle">{hero.title}</h1>
        <p class="heroSubtitle">{hero.subtitle}</p>

        <div class="heroActions">
          <a class="ds-btn ds-btn-primary" href="#avaliacao">Como buscar avaliação</a>
          <a class="ds-btn ds-btn-outline" href="/post/checklist-consulta">Checklist de consulta</a>
        </div>
      </div>

      <div class="heroMedia">
        <img src={hero.image} alt={hero.alt} loading="eager" decoding="async" />
      </div>
    </header>
  </section>

  <main class="diagWrap">
    <!-- Rotas rápidas -->
    <section class="card">
      <h2 class="sectionTitle">Rotas rápidas</h2>
      <div class="grid3">
        {quickRoutes.map((r) => (
          <a class="routeCard" href={r.href}>
            <h3 class="routeTitle">{r.title}</h3>
            <p class="muted" style="margin:0; line-height:1.55;">{r.desc}</p>
          </a>
        ))}
      </div>
    </section>

    <!-- Suspeita -->
    <section id="suspeita" class="card anchor">
      <h2 class="sectionTitle">Suspeita de TDAH</h2>
      <p class="muted" style="margin:0; line-height:1.7; max-width:72ch;">
        O ponto aqui é sair do “eu acho” e ir para padrões observáveis: frequência, prejuízo funcional,
        história de vida e contexto. Se existir impacto real e persistente, vale investigar com seriedade.
      </p>
    </section>

    <!-- Clusters -->
    <section class="card">
      <h2 class="sectionTitle">Clusters principais</h2>
      <div class="clustersGrid">
        {clusters.map((c) => (
          <a class="clusterCard" href={c.href}>
            <h3 class="clusterTitle">{c.title}</h3>
            <p class="muted" style="margin:0; line-height:1.55;">{c.description}</p>
          </a>
        ))}
      </div>
    </section>

    <!-- Avaliação -->
    <section id="avaliacao" class="card anchor">
      <h2 class="sectionTitle">Como buscar avaliação</h2>
      <div class="steps">
        {steps.map((s) => (
          <div class="stepRow">
            <h3 class="stepTitle">{s.title}</h3>
            <p class="stepText">{s.text}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Pós -->
    <section id="pos" class="card anchor">
      <h2 class="sectionTitle">Depois do diagnóstico</h2>
      <p class="muted" style="margin:0; line-height:1.7; max-width:72ch;">
        A pergunta muda de “qual é o rótulo?” para “qual é o plano?”.
        Psicoeducação, ajustes de ambiente, suporte e acompanhamento. Isso é o que sustenta resultado.
      </p>
    </section>

    <!-- Artigos em destaque -->
    <section>
      <h2 class="sectionTitle">Artigos de destaque</h2>

      <div class="featuredWrap">
        <article class="featuredBig">
          <a href={featuredHero.href}>
            <div class="featuredBigText">
              <div class="kicker">{featuredHero.kicker}</div>
              <h3 class="featuredBigTitle">{featuredHero.title}</h3>
              <p class="featuredBigExcerpt">{featuredHero.excerpt}</p>
            </div>

            <div class="featuredBigMedia">
              <img
                src={featuredHero.image}
                alt={featuredHero.imageAlt}
                loading="lazy"
                decoding="async"
              />
            </div>
          </a>
        </article>

        <div class="magGrid3">
          {featuredCards.map((c) => (
            <MagCard {...c} />
          ))}
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="card cta">
      <div>
        <h2 style="margin:0 0 8px 0; font-family:'Playfair Display',serif; color:#fff;">
          {cta.title}
        </h2>
        <p class="muted" style="margin:0; line-height:1.7;">
          {cta.text}
        </p>
      </div>

      <div class="ctaActions">
        <a class="ds-btn ds-btn-primary" href={cta.primaryHref}>{cta.primaryLabel}</a>
        <a class="ds-btn ds-btn-outline" href={cta.secondaryHref}>{cta.secondaryLabel}</a>
      </div>
    </section>

    <!-- FAQ -->
    <section class="card">
      <h2 class="sectionTitle">FAQ</h2>
      {faq.map((item, idx) => (
        <details class="faqItem" open={idx === 0}>
          <summary>
            <span>{item.q}</span>
            <span aria-hidden="true" style="opacity:.8;">›</span>
          </summary>
          <p class="muted" style="margin:10px 0 0 0; line-height:1.7; max-width:72ch;">
            {item.a}
          </p>
        </details>
      ))}
    </section>
  </main>
</BaseLayout>