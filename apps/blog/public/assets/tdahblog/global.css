/* =========================================================
GLOBAL.CSS — VivaTDAH Design System
Base + Tokens + Editorial + Components
(NÃO inclui header)
========================================================= */

:root {
  color-scheme: light dark;
  text-rendering: geometricPrecision;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Paleta base (Mantida original) */
  --pal-lav-050: #ddd6ff;
  --pal-lav-300: #8371cd;
  --pal-pri-600: #6e42a7;
  --pal-pri-800: #4d398c;
  --pal-sun-400: #f6e541;

  /* ✅ AJUSTE NATURE LILÁS: Conectando aos tokens do tokens.css */
  --_bg: var(--color-surface-0, var(--pal-lav-050));
  --_text: var(--color-text-primary, #111);
  --_muted: var(--color-text-secondary, rgba(17, 17, 17, 0.72));

  --_link: var(--color-brand-primary, var(--pal-pri-800));
  --_link-hover: var(--color-brand-secondary, var(--pal-pri-600));

  --_focus: var(--pal-sun-400);

  --_border: var(--color-border, rgba(17, 17, 17, 0.14));
  --_surface-1: var(--color-surface-1, rgba(255, 255, 255, 0.55));
  --_surface-2: var(--color-surface-2, rgba(255, 255, 255, 0.38));

  /* ✅ AJUSTE NATURE: Bordas retas e limpas */
  --_radius-card: var(--radius-card, 0px);
  --_radius-btn: var(--radius-button, 4px);

  --ds-block-bg: var(--pal-pri-800);
  --ds-block-text: #fff;

  --ds-primary: var(--pal-pri-600);
  --ds-primary-hover: var(--pal-pri-800);

  /* =========================================================
     Compat (Nature-like)
  ========================================================= */

  --compat-radius-btn: 4px;
  --compat-radius-card: 6px;

  --compat-shadow: 0 10px 28px rgba(0, 0, 0, 0.10);
  --compat-shadow-hover: 0 14px 36px rgba(0, 0, 0, 0.16);
  --compat-shadow-press: 0 8px 18px rgba(0, 0, 0, 0.18);

  --compat-border-idle: transparent;
  --compat-border-hover: color-mix(in oklab, var(--pal-pri-600) 42%, transparent);

  --compat-card-bg: color-mix(in oklab, var(--_surface-1) 76%, white 24%);
  --compat-card-bg-dark: color-mix(in oklab, var(--_surface-2) 74%, black 26%);

  /* ✅ Motion */
  --motion-fast: var(--motion-fast, 120ms);
  --motion-normal: var(--motion-normal, 200ms);
  --motion-slow: var(--motion-slow, 320ms);
  --motion-easing: var(--motion-easing, cubic-bezier(0.4, 0, 0.2, 1));

  /* ✅ Fundo: controle fino de “clareza” do tile */
  --bg-tile-size: 1180px;           /* maior = menos repetição aparente */
  --bg-tile-opacity: 0.42;          /* ↑ deixa o fundo mais visível */
  --bg-wash-1: rgba(221, 214, 255, 0.12); /* ↓ gradiente mais fraco */
  --bg-wash-2: rgba(160, 210, 255, 0.10); /* ↓ gradiente mais fraco */
  --bg-wash-linear: rgba(255, 255, 255, 0.92); /* ↑ clareia o “wash” */
}

html[data-theme="dark"] {
  --_bg: var(--color-surface-0, #0b0b0c);
  --_text: var(--color-text-primary, rgba(255, 255, 255, 0.92));
  --_muted: var(--color-text-muted, rgba(255, 255, 255, 0.7));

  --_link: var(--color-brand-primary, var(--pal-lav-050));
  --_link-hover: var(--pal-sun-400);

  --_border: var(--color-border, rgba(221, 214, 255, 0.18));
  --_surface-1: var(--color-surface-1, rgba(255, 255, 255, 0.06));
  --_surface-2: var(--color-surface-2, rgba(255, 255, 255, 0.1));

  --ds-block-bg: rgba(110, 66, 167, 0.22);
  --ds-block-text: rgba(255, 255, 255, 0.95);

  /* ✅ Dark: também “clareia” um pouco o tile e reduz peso do wash */
  --bg-tile-opacity: 0.28;
  --bg-wash-1: rgba(155, 138, 216, 0.10);
  --bg-wash-2: rgba(160, 210, 255, 0.06);
}

/* =========================================================
   Base / Anti-scroll lateral
========================================================= */
*,
*::before,
*::after { box-sizing: border-box; }

html,
body {
  height: 100%;
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

body { margin: 0; }

img, svg, video, canvas {
  max-width: 100%;
  height: auto;
}

:where(a, button, .btn, .nav-link) {
  -webkit-tap-highlight-color: transparent;
}

/* =========================================================
   Fundo editorial (mais claro e com tile mais visível)
========================================================= */
body {
  background-color: var(--_bg);
  color: var(--_text);

  /* ✅ A imagem agora vem com um “layer” de transparência próprio
     pra não depender só do blend-mode */
  background-image:
    linear-gradient(rgba(255,255,255,var(--bg-tile-opacity)), rgba(255,255,255,var(--bg-tile-opacity))),
    url("/fundo.jpg"),
    radial-gradient(900px 520px at 18% 12%, var(--bg-wash-1), transparent 60%),
    radial-gradient(820px 520px at 70% 18%, var(--bg-wash-2), transparent 62%),
    linear-gradient(180deg, rgba(221, 214, 255, 0.10) 0%, var(--bg-wash-linear) 62%, rgba(255, 255, 255, 1) 100%);

  /* ✅ importante: imagem em modo normal, sem “apagar” */
  background-repeat: no-repeat, repeat, no-repeat, no-repeat, no-repeat;
  background-size: auto, var(--bg-tile-size) auto, cover, cover, cover;
  background-position: 0 0, 0 0, center, center, center;

  /* ✅ blend mais leve para preservar detalhe do fundo */
  background-blend-mode: normal, normal, normal, normal, normal;
}

/* Dark */
html[data-theme="dark"] body {
  background-color: var(--_bg);
  color: var(--_text);

  background-image:
    linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)),
    linear-gradient(rgba(255,255,255,var(--bg-tile-opacity)), rgba(255,255,255,var(--bg-tile-opacity))),
    url("/fundo.jpg"),
    radial-gradient(900px 520px at 18% 12%, var(--bg-wash-1), transparent 60%),
    radial-gradient(820px 520px at 70% 18%, var(--bg-wash-2), transparent 62%),
    linear-gradient(180deg, #1b1b33 0%, #120f1d 62%, #0d0b12 100%);

  background-repeat: no-repeat, no-repeat, repeat, no-repeat, no-repeat, no-repeat;
  background-size: cover, auto, var(--bg-tile-size) auto, cover, cover, cover;
  background-position: center, 0 0, 0 0, center, center, center;

  background-blend-mode: normal, normal, normal, normal, normal, normal;
}

/* =========================================================
   Links base
========================================================= */
a {
  color: var(--_link);
  text-decoration: none;
  font-weight: 650;
  text-underline-offset: 4px;
  text-decoration-thickness: 2px;
}

a:hover {
  color: var(--_link-hover);
  text-decoration: underline;
}

a.btn:hover,
a.ds-btn:hover,
a.nav-link:hover { text-decoration: none; }

/* Focus ring */
:where(a, button, input, textarea, select, summary, [role="button"], .btn, .nav-link):focus-visible {
  outline: 2px solid var(--focus-ring, var(--_focus));
  outline-offset: 3px;
}

/* =========================================================
   Layout base
========================================================= */
main {
  max-width: 980px;
  margin: 0 auto;
  padding: 0 16px 22px;
}

@media (min-width: 720px) {
  main { padding: 0 18px 28px; }
}

/* =========================================================
   BOTÕES (.btn)
========================================================= */
.btn,
a.btn,
button.btn {
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;

  min-height: 44px;
  width: auto;
  max-width: 100%;
  min-width: 0;

  padding: 10px 14px;
  border-radius: var(--compat-radius-btn);

  border: 1px solid var(--compat-border-idle);
  background: color-mix(in oklab, var(--_surface-2) 86%, white 14%);
  color: var(--_text);

  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.10);

  text-decoration: none;
  font-weight: 750;
  line-height: 1;
  letter-spacing: 0.01em;

  cursor: pointer;
  user-select: none;

  transition:
    transform var(--motion-fast) var(--motion-easing),
    box-shadow var(--motion-fast) var(--motion-easing),
    border-color var(--motion-fast) var(--motion-easing),
    background var(--motion-fast) var(--motion-easing);
}

html[data-theme="dark"] .btn,
html[data-theme="dark"] a.btn,
html[data-theme="dark"] button.btn {
  background: color-mix(in oklab, var(--_surface-2) 80%, black 20%);
  box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35);
}

.btn:hover,
a.btn:hover,
button.btn:hover {
  border-color: var(--compat-border-hover);
  box-shadow: var(--compat-shadow-hover);
  transform: translateY(-1px);
  text-decoration: none;
}

@media (hover: none) {
  .btn:active,
  a.btn:active,
  button.btn:active {
    transform: translateY(0px) scale(.99);
    box-shadow: var(--compat-shadow-press);
    border-color: var(--compat-border-hover);
  }
}

.btn:disabled,
button.btn:disabled,
.btn[aria-disabled="true"] {
  opacity: 0.55;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.btn-primary,
a.btn-primary,
button.btn-primary {
  background: color-mix(in oklab, var(--pal-pri-600) 92%, white 8%);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 12px 28px rgba(110, 66, 167, 0.26);
}

.btn-primary:hover,
a.btn-primary:hover,
button.btn-primary:hover {
  border-color: color-mix(in oklab, var(--pal-pri-600) 70%, white 30%);
  background: color-mix(in oklab, var(--pal-pri-600) 84%, black 16%);
}

.btn-outline,
a.btn-outline,
button.btn-outline {
  background: color-mix(in oklab, var(--pal-lav-300) 10%, transparent);
  color: var(--_link);
  border: 1px solid transparent;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
}

.btn-outline:hover,
a.btn-outline:hover,
button.btn-outline:hover {
  border-color: var(--compat-border-hover);
  background: color-mix(in oklab, var(--pal-lav-300) 16%, transparent);
}

/* =========================================================
   CARDS (.card)
========================================================= */
.card {
  border-radius: var(--compat-radius-card);
  background: var(--compat-card-bg);
  border: 1px solid var(--compat-border-idle);
  box-shadow: var(--compat-shadow);
  overflow: hidden;

  transition:
    transform var(--motion-normal) var(--motion-easing),
    box-shadow var(--motion-normal) var(--motion-easing),
    border-color var(--motion-normal) var(--motion-easing),
    background var(--motion-normal) var(--motion-easing);
}

html[data-theme="dark"] .card {
  background: var(--compat-card-bg-dark);
  box-shadow: 0 16px 36px rgba(0, 0, 0, 0.45);
}

.card:hover {
  border-color: var(--compat-border-hover);
  box-shadow: var(--compat-shadow-hover);
  transform: translateY(-2px);
}

@media (hover: none) {
  .card:active {
    transform: translateY(-1px);
    border-color: var(--compat-border-hover);
    box-shadow: var(--compat-shadow-press);
  }
}

.card-body { padding: 16px; }

.card-actions {
  display: flex;
  gap: 10px;
  align-items: center;
  justify-content: flex-start;
  flex-wrap: wrap;

  padding: 12px 16px 16px 16px;
  background: color-mix(in oklab, var(--_surface-2) 55%, transparent);
}

.card-title {
  margin: 0 0 10px 0;
  font-weight: 750;
  letter-spacing: -0.01em;
}

.card a:hover { text-decoration: underline; }

/* =========================================================
   GRID (.grid)
========================================================= */
.grid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(1, minmax(0, 1fr));
}

@media (min-width: 740px) {
  .grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 16px;
  }
}

@media (min-width: 1100px) {
  .grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

/* =========================================================
   SEARCH (.search)
========================================================= */
.search {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  margin: 12px 0 18px;
}

.search input {
  flex: 1 1 260px;
  min-height: 44px;
  padding: 10px 12px;

  border-radius: var(--compat-radius-btn);
  border: 1px solid transparent;
  background: color-mix(in oklab, var(--_surface-1) 84%, white 16%);
  color: var(--_text);

  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.08);

  transition:
    border-color var(--motion-fast) var(--motion-easing),
    box-shadow var(--motion-fast) var(--motion-easing),
    background var(--motion-fast) var(--motion-easing);
}

html[data-theme="dark"] .search input {
  background: color-mix(in oklab, var(--_surface-2) 78%, black 22%);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
}

.search input:hover {
  border-color: color-mix(in oklab, var(--pal-lav-300) 35%, transparent);
}

.search input::placeholder { color: var(--_muted); }

input,
textarea,
select { font: inherit; color: var(--_text); }

input:not([type="checkbox"]):not([type="radio"]),
textarea,
select {
  width: 100%;
  max-width: 100%;

  min-height: 44px;
  padding: 10px 12px;

  border-radius: var(--compat-radius-btn);
  border: 1px solid transparent;

  background: color-mix(in oklab, var(--_surface-1) 84%, white 16%);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.08);
  outline: none;

  transition:
    border-color var(--motion-fast) var(--motion-easing),
    box-shadow var(--motion-fast) var(--motion-easing),
    background var(--motion-fast) var(--motion-easing);
}

html[data-theme="dark"] input:not([type="checkbox"]):not([type="radio"]),
html[data-theme="dark"] textarea,
html[data-theme="dark"] select {
  background: color-mix(in oklab, var(--_surface-2) 78%, black 22%);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
}

input:not([type="checkbox"]):not([type="radio"]):hover,
textarea:hover,
select:hover {
  border-color: color-mix(in oklab, var(--pal-lav-300) 35%, transparent);
}

input:not([type="checkbox"]):not([type="radio"]):focus,
textarea:focus,
select:focus { border-color: transparent; }

.pagination .btn { text-decoration: none; }

/* Bullets/listas */
.prose ul,
.prose ol { padding-left: 1.15rem; }

.prose li { margin: .35rem 0; }

.prose ul li::marker {
  color: color-mix(in oklab, var(--pal-pri-600) 55%, #000);
}

/* hide Nature Outlook badge */
.nature-outlook-badge { display: none !important; }